/*! simpleWeather v3.1.0 - http://simpleweatherjs.com
  Modified By: Felipe, to Accept Translation - https://github.com/RealSvildr/simpleWeather_Translation
    If you want to keep up with the original version, and I didn't updated it yet, 
    just add the object "simpleWeather" and get the code from lines 59 to 67.
*/
var simpleWeather = {}; !function (a) { "use strict"; function b(a, b) { return "f" === a ? Math.round(5 / 9 * (b - 32)) : Math.round(1.8 * b + 32) } a.extend({ simpleWeather: function (c) { c = a.extend({ location: "", woeid: "", unit: "f", success: function (a) { }, error: function (a) { } }, c); var d = new Date, e = "https://query.yahooapis.com/v1/public/yql?format=json&rnd=" + d.getFullYear() + d.getMonth() + d.getDay() + d.getHours() + "&diagnostics=true&callback=?&q="; if ("" !== c.location) { var f = ""; f = /^(\-?\d+(\.\d+)?),\s*(\-?\d+(\.\d+)?)$/.test(c.location) ? "(" + c.location + ")" : c.location, e += 'select * from weather.forecast where woeid in (select woeid from geo.places(1) where text="' + f + '") and u="' + c.unit + '"' } else { if ("" === c.woeid) return c.error("Could not retrieve weather due to an invalid location."), !1; e += "select * from weather.forecast where woeid=" + c.woeid + ' and u="' + c.unit + '"' } return a.getJSON(encodeURI(e), function (a) { if (null !== a && null !== a.query && null !== a.query.results && "Yahoo! Weather Error" !== a.query.results.channel.description) { var f, d = a.query.results.channel, e = {}, g = ["N", "NNE", "NE", "ENE", "E", "ESE", "SE", "SSE", "S", "SSW", "SW", "WSW", "W", "WNW", "NW", "NNW", "N"], h = "https://s.yimg.com/os/mit/media/m/weather/images/icons/l/44d-100567.png"; if (null != simpleWeather.TextMapping) { d.item.condition.text = simpleWeather.TextMapping[d.item.condition.text]; for (var i = 0; i < d.item.forecast.length; i++) void 0 != simpleWeather.TextMapping[d.item.forecast[i].text] && (d.item.forecast[i].text = simpleWeather.TextMapping[d.item.forecast[i].text]) } e.title = d.item.title, e.temp = d.item.condition.temp, e.code = d.item.condition.code, e.todayCode = d.item.forecast[0].code, e.currently = d.item.condition.text, e.high = d.item.forecast[0].high, e.low = d.item.forecast[0].low, e.text = d.item.forecast[0].text, e.humidity = d.atmosphere.humidity, e.pressure = d.atmosphere.pressure, e.rising = d.atmosphere.rising, e.visibility = d.atmosphere.visibility, e.sunrise = d.astronomy.sunrise, e.sunset = d.astronomy.sunset, e.description = d.item.description, e.city = d.location.city, e.country = d.location.country, e.region = d.location.region, e.updated = d.item.pubDate, e.link = d.item.link, e.units = { temp: d.units.temperature, distance: d.units.distance, pressure: d.units.pressure, speed: d.units.speed }, e.wind = { chill: d.wind.chill, direction: g[Math.round(d.wind.direction / 22.5)], speed: d.wind.speed }, d.item.condition.temp < 80 && d.atmosphere.humidity < 40 ? e.heatindex = 2.04901523 * d.item.condition.temp - 42.379 + 10.14333127 * d.atmosphere.humidity - .22475541 * d.item.condition.temp * d.atmosphere.humidity - 6.83783 * Math.pow(10, -3) * Math.pow(d.item.condition.temp, 2) - 5.481717 * Math.pow(10, -2) * Math.pow(d.atmosphere.humidity, 2) + 1.22874 * Math.pow(10, -3) * Math.pow(d.item.condition.temp, 2) * d.atmosphere.humidity + 8.5282 * Math.pow(10, -4) * d.item.condition.temp * Math.pow(d.atmosphere.humidity, 2) - 1.99 * Math.pow(10, -6) * Math.pow(d.item.condition.temp, 2) * Math.pow(d.atmosphere.humidity, 2) : e.heatindex = d.item.condition.temp, "3200" == d.item.condition.code ? (e.thumbnail = h, e.image = h) : (e.thumbnail = "https://s.yimg.com/zz/combo?a/i/us/nws/weather/gr/" + d.item.condition.code + "ds.png", e.image = "https://s.yimg.com/zz/combo?a/i/us/nws/weather/gr/" + d.item.condition.code + "d.png"), e.alt = { temp: b(c.unit, d.item.condition.temp), high: b(c.unit, d.item.forecast[0].high), low: b(c.unit, d.item.forecast[0].low) }, "f" === c.unit ? e.alt.unit = "c" : e.alt.unit = "f", e.forecast = []; for (var i = 0; i < d.item.forecast.length; i++) f = d.item.forecast[i], f.alt = { high: b(c.unit, d.item.forecast[i].high), low: b(c.unit, d.item.forecast[i].low) }, "3200" == d.item.forecast[i].code ? (f.thumbnail = h, f.image = h) : (f.thumbnail = "https://s.yimg.com/zz/combo?a/i/us/nws/weather/gr/" + d.item.forecast[i].code + "ds.png", f.image = "https://s.yimg.com/zz/combo?a/i/us/nws/weather/gr/" + d.item.forecast[i].code + "d.png"), e.forecast.push(f); c.success(e) } else c.error("There was a problem retrieving the latest weather information.") }), this } }) }(jQuery);
